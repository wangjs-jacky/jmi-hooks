---
title: useEvent
nav: Hooks
toc: content
demo:
  cols: 2
group: Advanced
---

# useEvent æºç è§£æ

`useCallback` çš„é«˜çº§ç‰ˆï¼ŒåŸºæœ¬å¯ä»¥å®Œå…¨å–ä»£ã€‚

è¯¥é’©å­ä¹Ÿæ˜¯åœ¨ `React RFCs` åŸæœ¬ä¹Ÿæ˜¯é’©å­åˆ—è¡¨ä¸­çš„å…¶ä¸­ä¸€é¡¹ï¼Œè§[é“¾æ¥](https://github.com/reactjs/rfcs/pull/220#issuecomment-1259938816) ï¼Œä½†æ˜¯å‡ºäºæŸäº›åŸå› ï¼Œå·²ç»è¢«å®˜æ–¹ç§»é™¤ã€‚

![image-20240303163739958](https://vblog-img.oss-cn-shanghai.aliyuncs.com/jacky-blog-vuepress/202403031637386.png)

è™½ç„¶æ²¡æœ‰å¾—åˆ°å®˜æ–¹çš„åŸç”Ÿæ”¯æŒï¼Œä½†æ˜¯æˆ‘ä»¬ä»å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼Œç®€åŒ–æˆ‘ä»¬åœ¨ä½¿ç”¨ `useCallback` äº§ç”Ÿçš„å¿ƒæ™ºè´Ÿæ‹…ã€‚

## ä½¿ç”¨åœºæ™¯

æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¼“å­˜ä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨åœ°å€éå¸¸éº»çƒ¦ã€‚

ç‰¹åˆ«æ˜¯å¤„ç† useCallback çš„ä¾èµ–æ•°ç»„ã€‚

<code src="./demo/demo1.tsx"></code>

ç°åœ¨å¸Œæœ›å°è£…ä¸€ä¸ªé’©å­ï¼Œçœç•¥æ‰ä¾èµ–æ•°ç»„ï¼Œç±»ä¼¼äºå¦‚ä¸‹é’©å­ï¼š

- `rc-util` ä¸­çš„ `useEvent`
- `ahooks` ä¸­çš„ `useMemoizedFn`

è¯¥é’©å­å®ç°çš„æ€è·¯éå¸¸å·§å¦™ï¼š
åœ¨å‡½æ•°ä¸­å¯¹äºå‡½æ•°æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ç§æ–¹å¼æ— é™åŒ…è£¹ã€‚

```ts
const fn1 = (arg1, arg2) => {};
// å¯¹å…¥å‚ arg1, arg2 ç»§æ‰¿
export const fn2 = (arg1, arg2) => {
  fn1(arg1, arg2);
};
```

åœ¨ `js` ç¼–ç¨‹ä¸­ä¸ä¼šè¿™ä¹ˆå†™ï¼Œä½†æ˜¯å¯¹äº `hooks` ç¼–ç¨‹æ¥è¯´ï¼Œæ­£å¥½å¯ä»¥åˆ©ç”¨åˆ°è¿™å¤šåŒ…è£¹ä¸€å±‚çš„ç®­å¤´å‡½æ•°ã€‚

ä¸ºé¿å…é‡å¤æ¸²æŸ“ï¼Œå¯ä»¥ä½¿ç”¨ `useCallback` ç¼“å­˜å‡½æ•°å¯¹åŒ…è£¹çš„ç®­å¤´å‡½æ•°è¿›è¡Œç¼“å­˜ï¼Œè¿™æ ·æ—¢è§£å†³äº† deps çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥é”æ­»å¼•ç”¨åœ°å€ã€‚

```ts
var envVar; /* ç¯å¢ƒå˜é‡(æ³¨æ„) */

// ğŸš¨ æ³¨æ„ä½¿ç”¨ ref ç¼“å­˜
const envVarRef = useRef();
const fnRef = useRef(fn);
fnRef.currrent = fnRef;

// fn1 å¼•ç”¨åœ°å€å‘ç”Ÿå˜åŒ–
const fn1 = (arg1, arg2) => {
  /* ä½¿ç”¨åˆ°äº† envVar */
  console.log(envVarRef.current);
};

// fn2 å›ºå®šå¼•ç”¨åœ°å€
export const fn2 = React.useCallback((arg1, arg2) => {
  fn1(arg1, arg2);
}, []);
```

> éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯, `fn1` ä»…ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦å¯¹ `fn1` ä¸­æ‰€æœ‰çš„ç¯å¢ƒå˜é‡è¿›è¡Œ `ref` ç¼“å­˜ã€‚

## å®Œæ•´æºç 

<code src="./demo/demo2.tsx">ç¤ºä¾‹</code>
